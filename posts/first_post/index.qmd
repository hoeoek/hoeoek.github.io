---
layout: post
title:  "An OSINT approach to citizen audit"
categories: [api, umeå, osint]
draft: true
---



Hello, internet!

In this very first post, I want to totally rush past the part of introducing myself and instead leave that to the [About](../about.markdown) page.

Today I will start everything off in a brutal way, using open data about invoices from the municipality of Umeå. I'll be using R to communicate with the API, as well as for some basic data analysis and visualization.

Umeå has its own [open REST API](https://opendata.umea.se/api) service where you can find all sorts of data about the municipality. I found a dataset about invoices, which I thought would be a good starting point.

## Exploring the API:

The API is pretty straightforward, and you can find all the information you need on the above-mentioned link.

The API uses HTTP GET requests to retrieve data, and the data is returned in JSON format. After some tinkering, I found download links for the data in CSV format, which is a lot easier to work with. There are datasets available for the years 2017 through 2023, and I'll be using the 2017 through 2022 datasets as the 2023 dataset is still being updated.

## Downloading the data:

I'll be using the `httr` package to make the HTTP requests, and `jsonlite` to parse the JSON data.

```{r}
#| eval: false
file_names <- paste0("raw/leverantorsfakturor-", 2017:2022, ".csv")

raw_invoices <- map_dfr(file_names, read_delim, delim = ";")
```

## Cleaning the data:

Having a look at it revears some messiness that we need to clean up. The datasets variable names are in Swedish, so using my special domain skills (being a swede) i can see straight away that the variable naming between the input .csv's are not consistent. I'll fix that, along with selecting and translating interesting features.

```{r}
#| eval: false
raw_invoices %>% glimpse()
```
